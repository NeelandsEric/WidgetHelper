{
  "widget_class": "Digital%20Value%20-%20Leds",
  "widget_subclass": "141",
  "w_x": "`%XPOS%`",
  "w_y": "`%YPOS%`",
  "station": "",
  "io_id": "`%IO_ID%`",
  "code": "<script>\n\t\n//=================================================================================\n//=============================    WIDGET: led   ==================================\n//=================================================================================\nfunction led(holder,url,val_source,params) {\n\t//primeste date in forma value|um|error=0,1\n\tvar p={\n\t\t\"holder\" : holder,\n\t\t\"url\" : val_source,\t\t\n\t\t\"color_on\" : \"#0F0-#050\",\n\t\t\"color_off\" : \"#FFF-#555\",\n\t\t\"color_err\" : \"#F00-#500\",\n\t\t\"color_cau\" : \"#FF0-#550\",\n\t\t\"width\":20,\n\t\t\"height\":20,\n\t\t\"light_width\":20,\n\t\t\"light_height\":20\n\t};\n\tjQuery.extend(p,params);\n\t\n\tvar ledul = Raphael(p.holder, p.width, p.height);\n\tvar circle=ledul.ellipse(p.width/2, p.height/2, p.light_width/2, p.light_height/2);\n\tcircle.attr(\"stroke-width\",0);\n\tcircle.attr(\"fill\", \"r(0.4, 0.4)\"+get_gradient_color(p.color_on));\t\n\n\tvar val_update=function(data){\n\t\t\tdata=data.split('|');\n\t\t\tif (data[2]==1) {\n\t\t\t\t//error\n\t\t\t\tcircle.attr(\"fill\", \"r(0.4, 0.4)\"+get_gradient_color(p.color_err));\n\t\t\t\t//alertStatus[pos]=true;\n\t\t\t} else {\n\t\t\t\t//alertStatus[pos]=false;\n\t\t\t\tif (data[0]==0) {\n\t\t\t\t\t//off\n\t\t\t\t\tcircle.attr(\"fill\", \"r(0.4, 0.4)\"+get_gradient_color(p.color_off));\n\t\t\t\t} else if(data[0] == 1){\n\t\t\t\t\t//on\n\t\t\t\t\tcircle.attr(\"fill\", \"r(0.4, 0.4)\"+get_gradient_color(p.color_on));\n\t\t\t\t}else if(data[0] == 2){\n\t\t\t\t\t// error\n\t\t\t\t\tcircle.attr(\"fill\", \"r(0.4, 0.4)\"+get_gradient_color(p.color_err));\n\t\t\t\t}else if(data[0] >= 3){\n\t\t\t\t\t// caution\n\t\t\t\t\tcircle.attr(\"fill\", \"r(0.4, 0.4)\"+get_gradient_color(p.color_cau));\n\t\t\t\t}else {\n\t\t\t\t\t// error\n\t\t\t\t\tcircle.attr(\"fill\", \"r(0.4, 0.4)\"+get_gradient_color(pink));\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t}\n\t\t\t//reload_obj[pos]=setTimeout(function(){update();},p.interval);\n\t}\n\t\n\tattachLiveUpdater(val_source, function(data){\n\t\tval_update(data);\n\t});\n\t\n};\t\n\t\n</script>\n<div style=\"/**main_holder**/padding:5px;\">\n    <span id=\"holder_1457957131378\" style=\"text-align:center; display:inline-block;\"></span>\n    <span style=\"/**Label**/padding-left:5px; font-size:14px; font-family:Arial;\">\n        <!--*Label*-->\n        <!---->\n    </span>\n</div>\n<script language=\"javascript\" type=\"text/javascript\">\n  var server='get_value';\n  var io_id=`%IO_ID%`;\n\tvar val_source=io_id;\n\tvar widget_help={\n\t\t\"main_help\":{\n\t\t\t\"en\":\"Display a digital input's value.\",\n\t\t\t\"ro\":\"Afișează valoarea unei intrări digitale.\"\n\t\t},\n\t\t\"OnColor\":{\n\t\t\t\"en\":\"The color of the LED when the input's value is 1. The colour's name should be written here!\",\n\t\t\t\"ro\":\"Culoarea LED-ului când intrarea este pe 1.  Scrieti aici numele culorii!\",\n\t\t\t\"width\":\"60px\"\n\t\t},\n\t\t\"OffColor\":{\n\t\t\t\"en\":\"The color of the LED when the input's value is 0. The colour's name should be written here!\",\n\t\t\t\"ro\":\"Culoarea LED-ului când intrarea este pe 0. Scrieti aici numele culorii!\",\n\t\t\t\"width\":\"60px\"\n\t\t},\n\t\t\"ErrColor\":{\n\t\t\t\"en\":\"The color of the LED when there's an error. The colour's name should be written here!\",\n\t\t\t\"ro\":\"Culoarea LED-ului când apare o eroare. Scrieti aici numele culorii!\",\n\t\t\t\"width\":\"60px\"\n\t\t},\n\t\t\"CauColor\":{\n\t\t\t\"en\":\"The color of the LED when there's an caution. The colour's name should be written here!\",\n\t\t\t\"ro\":\"Culoarea LED-ului când apare o caution. Scrieti aici numele culorii!\",\n\t\t\t\"width\":\"60px\"\n\t\t},\n\t\t\"LEDHeight\":{\n\t\t\t\"en\":\"The LED's height, measured in pixels.\",\n\t\t\t\"ro\":\"Înălțimea LED-ului, măsurată în pixeli.\",\n\t\t\t\"width\":\"30px\"\n\t\t},\n\t\t\"LEDWidth\":{\n\t\t\t\"en\":\"The LED's width, measured in pixels.\",\n\t\t\t\"ro\":\"Lățimea LED-ului, măsurată în pixeli.\",\n\t\t\t\"width\":\"30px\"\n\t\t}\n\t};\n\n\tvar editable_params={\n\t\t\"OnColor\":\"green\",\n\t\t\"OffColor\":\"grey\",\n\t\t\"ErrColor\":\"red\",\n\t\t\"CauColor\":\"yellow\",\n\t\t\"LEDHeight\":25,\n\t\t\"LEDWidth\":25\n\t};\n  var params={\n    \"color_on\":\"green\",\n    \"color_off\":\"grey\",\n    \"color_err\":\"red\",\n\t\t\"color_cau\":\"yellow\",\n    \"width\":20,\n    \"height\":20,\n    \"light_width\":20,\n    \"light_height\":20};\n\tparams.color_on=editable_params.OnColor;\n\tparams.color_off=editable_params.OffColor;\n\tparams.color_err=editable_params.ErrColor;\n\tparams.color_cau=editable_params.CauColor;\n\tparams.width=editable_params.LEDWidth;\n\tparams.height=editable_params.LEDHeight;\n\tparams.light_width=Math.round((editable_params.LEDWidth * 18) / 18);\n\tparams.light_height=Math.round((editable_params.LEDHeight * 18) / 18);\n\tnew led('holder_1457957131378', server, val_source, params);\n</script>"
}